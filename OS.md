# 1. 操作系统概述
## 1.1 操作系统基本概念
### 1.1.1 操作系统概念
### 1.1.2 操作系统的特征
* 并发
* 共享
* 虚拟(相关技术：时分复用技术，空分复用技术)
    1. 虚拟处理技术(单物理CPU对应多个逻辑CPU执行用户程序)
    2. 虚拟存储技术
    3. 虚拟设备技术(IO)
* 异步
### 1.1.3 操作系统的目标功能

## 1.2 操作系统的发展和分类

## 1.3 操作系统的运行环境
### 1.3.1 操作系统的运行机制
* 操作系统内核程序(核心态)
    1. 硬件相关：时钟管理，中断处理，设备驱动
    2. 运行频率高：进程管理，存储器管理，设备管理
* 应用程序(用户态)
### 1.3.2 中断和异常（用于从用户态转核心态）
* 中断(外中断)：CPU指令以外的事件发生，例如设备发出的IO中断，时钟中断
* 异常(内中断)：非法操作码，地址越界，算术溢出。一旦出现应立即处理
### 1.3.3 系统调用
* 设备管理
* 文件管理
* 进程控制
* 进程通信
* 内存管理

# 2. 进程管理
## 2.1 进程与线程
### 2.1.1 进程的概念和特征
* 进程的概念：PCB进程控制块是进程存在的唯一标志。进程映像：PCB+程序段+相关数据段
* 进程的特征：动态性，并发性，独立性，异步性，结构性
### 2.1.2 进程的状态和转换
* 创建
* 就绪
* 运行
* 阻塞
* 终止
### 2.1.3 进程控制
* 进程的创建
    1. 分配唯一进程标识号，申请空白PCB
    2. 分配内存资源
    3. 初始化PCB
    4. 进入就绪队列，等待调度
* 进程的终止
    1. 根据进程标识号检索PCB，读出进程状态
    2. 若该进程处于执行状态，立即终止执行，调度其他进程
    3. 终止子进程
    4. 回收内存资源
    5. 删除队列中的PCB
* 进程的阻塞唤醒
    1. 查找对应PCB
    2. 保护现场，状态转为阻塞，停止运行(唤醒：等待队列移出，状态转为就绪)
    3. 将PCB插入相应事件等待队列(唤醒：PCB插入就绪队列，等待调度)
* 进程切换
    1. 保存CPU上下文
    2. 更新PCB信息
    3. 将进程PCB移入响应就绪或阻塞队列
    4. 选择另一个进程执行，更新其PCB
    5. 更新内存管理数据结构
    6. 恢复CPU上下文
### 2.1.4 进程的组织
* 进程控制块PCB
    1. 进程描述信息
        * 进程标识符PID
        * 用户标识符UID
    2. 进程控制管理信息
        * 进程状态
        * 进程优先级
        * 代码入口地址
        * 程序外存地址
        * 进入内存时间
        * 处理机占用时间
        * 信号量使用
    3. 资源分配清单
        * 代码段指针
        * 数据段指针
        * 堆栈段指针
        * 文件描述符
        * 键盘
        * 鼠标
    4. 处理机相关信息
        * 状态字
        * 通用寄存器
        * 地址寄存器
        * 控制寄存器
        * 标志寄存器
* 程序段(共享)
* 数据段
### 2.1.5 进程通信
* 共享存储 操作系统提供可共享使用的空间和同步互斥工具，用户进程空间无法共享
* 消息传递 操作系统系统发送消息和接收消息两个原语
* 管道通信 共享文件
### 2.1.6 线程概念和多线程模型
* 线程的基本概念：基本的CPU执行单元
* 线程与进程比较
* 线程属性
* 实现方式：用户级，内核级
* 多线程模型

## 2.2 处理机调度

## 2.3 进程同步
### 2.3.1 进程同步概念
进程是并发执行的。为了让系统正确计算1+2*3，需要一定的机制约束加法进程在乘法进程完成之后发生。

* 临界资源(一次只能为一个进程所使用)。临界资源的访问：
    1. 进入区
    2. 临界区(访问临界资源)
    3. 退出区
    4. 剩余区

* 同步：直接制约关系
* 互斥：间接制约关系
### 2.3.2 实现临界区互斥的基本方法
* 软件实现方法
* 硬件实现方法
    1. 终端屏蔽方法
    2. 硬件指令方法TestAndSet指令，Swap指令
### 2.3.3 信号量
信号量只能被两个原语进行访问。wait(S)和signal(S),记作P操作V操作。
### 2.3.4 管城
### 2.3.5 经典同步问题
* 生产者消费者
* 读者，写者 写/写互斥，读/写互斥
* 哲学家进餐问题
* 吸烟者问题(流水线控制)

## 2.4 死锁
### 2.4.1 死锁概念
* 定义：多个进程因竞争资源造成的一种僵局，无外力作用下，所有进程无法向前推进
* 产生必要条件
    1. 互斥条件：在一段时间内某资源只能被一个进程所占有
    2. 不剥夺条件：进程所获得资源在未使用完毕前，不能被其他进程强行夺走
    3. 请求和保持条件：进程保持一个资源，请求另一个资源
    4. 循环等待条件：存在一种进程资源的循环等待链
### 2.4.2 死锁处理策略
### 2.4.3 死锁预防(破坏四个必要条件之一)
### 2.4.4 死锁避免 银行家算法
### 2.4.5 死锁检测和解除
* 资源剥夺
* 撤销进程
* 进程回退



